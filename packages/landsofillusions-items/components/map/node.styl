@import "{retronator:retronator-identity}/style/style.import"

.landsofillusions-items-components-map-node
  position absolute
  border 1rem solid atariGray(1)
  padding 1rem
  background atariGray(0)
  transition all ease-out 0.5s
  opacity 0

  &.visible
    opacity 1

  .name-area
    position relative
    overflow hidden
    height 100%

    .name
      position absolute
      width 100%
      max-height 14rem
      top 50%
      left 0
      transform translateY(-50%)
      color atariGray(2)
      text-transform uppercase
      line-height 6rem
      text-align center
      overflow hidden

  &.current
    background atariGray(1)
    z-index -1

    .name-area
      .name
        color atariGray(4)

  // Horizontal positioining of directions

  .direction
    position absolute
    z-index -1
    text-transform uppercase
    color atariGray(1)
    text-align center

  &.east
    .direction
      right calc(100% + 1.5rem)

  &.east.in
    .direction
      right calc(100% + 2.5rem)

  &.west
    .direction
      left calc(100% + 3.5rem)

  &.west.out
    .direction
      left calc(100% + 2.5rem)

  &.north
  &.south
  &.in.no-direction
  &.out.no-direction
  &.back
    .direction
      left calc(50% + 3rem)

  &.up
  &.down
    .direction
      left calc(50% + 7rem)

  &.northwest
  &.southwest
    .direction
      left auto
      right -1rem

  &.northeast
  &.southeast
    .direction
      left 1rem

  // Vertical positioning of directions

  &.east
  &.west
    .direction
      bottom 50%

  &.northwest
  &.north
  &.northeast
  &.in.no-direction
  &.up
    .direction
      top calc(100% + 1rem)

  &.southwest
  &.south
  &.southeast
  &.out.no-direction
  &.down
  &.back
    .direction
      bottom calc(100% + 1rem)

  // Node connections

  &::after
    content ''
    position absolute

  &.east::after
  &.west::after
  &.north::after
  &.south::after
  &.in.no-direction::after
  &.out.no-direction::after
  &.back::after
    background atariGray(1)

  &.east::after
  &.west::after
    width 9rem
    height 1rem
    top calc(50% - 0.5rem)

  &.north::after
  &.south::after
  &.in.no-direction::after
  &.out.no-direction::after
  &.back::after
    height 9rem
    width 1rem
    left calc(50% - 0.5rem)

  &.northwest::after
  &.west::after
  &.southwest::after
    right -10rem

  &.northeast::after
  &.east::after
  &.southeast::after
    left -10rem

  &.southwest::after
  &.south::after
  &.southeast::after
  &.down::after
  &.out.no-direction::after
  &.back::after
    top -10rem

  &.northwest::after
  &.north::after
  &.northeast::after
  &.up::after
  &.in.no-direction::after
    bottom -10rem

  &.northeast::after
  &.northwest::after
  &.southeast::after
  &.southwest::after
  &.up::after
  &.down::after
    width 9rem
    height 9rem
    background-size 100%

  &.northwest::after
  &.southeast::after
    background-image image('/items/map/minimap/diagonal-down.png')

  &.northeast::after
  &.southwest::after
    background-image image('/items/map/minimap/diagonal-up.png')

  &.up::after
  &.down::after
    left calc(50% - 3.5rem)
    background-image image('/items/map/minimap/stairs-down.png')

  &.in::before
  &.out::before
    content ''
    position absolute
    z-index 1
    left calc(50% - 2.5rem)
    width 5rem
    height 13rem
    background-size 100%
    background-image image('/items/map/minimap/door-in-n.png')
    background-color transparent

  &.in::before
    bottom -10rem

  &.out::before
    top -14rem

  &.in.south::before
  &.out.north::before
    background-image image('/items/map/minimap/door-in-s.png')
    height 11rem

  &.in.south::before
    top -10rem
    bottom auto

  &.out.north::before
    top auto
    bottom -11rem

  &.in.east::before
  &.in.west::before
  &.out.east::before
  &.out.west::before
    top calc(50% - 5.5rem)
    width 13rem
    height 9rem
    background-size 100%

  &.in.west::before
  &.out.west::before
    left auto
    right -10rem

  &.in.east::before
    left -10rem

  &.out.east::before
    left -13rem

  &.out.west::before
    right -13rem

  &.in.east::before
  &.out.west::before
    background-image image('/items/map/minimap/door-in-e.png')

  &.in.west::before
  &.out.east::before
    background-image image('/items/map/minimap/door-in-w.png')

  &.in.northwest::before
  &.out.northwest::before
  &.in.southeast::before
  &.out.southeast::before
  &.in.northeast::before
  &.out.northeast::before
  &.in.southwest::before
  &.out.southwest::before
    width 5rem
    height 8rem

  &.in.northwest::before
  &.out.northwest::before
  &.in.southeast::before
  &.out.southeast::before
    background-image image('/items/map/minimap/door-in-nw.png')

  &.in.northeast::before
  &.out.northeast::before
  &.in.southwest::before
  &.out.southwest::before
    background-image image('/items/map/minimap/door-in-ne.png')

  &.out.southeast::before
    left -13rem
    top -16rem

  &.in.northwest::before
    left auto
    right -2rem
    bottom -2rem

  &.northwest.up::after
  &.southwest.down::after
    left auto
    right -10rem

  &.southwest.down::after
  &.northeast.up::after
    background-image image('/items/map/minimap/stairs-up.png')

  &.northeast.up::after
  &.southeast.down::after
    left -10rem

  &.special-positioning.up::after
    left auto
    right 0

  &.special-positioning.in::after
    left 20%

  &.special-positioning.in::before
    left calc(20% - 2.5rem)

.landsofillusions-items-components-map
  .map-content
    &.mini-map
      .landsofillusions-items-components-map-node
        .name-area
          .name
            checkout()

    &.big-map
      .landsofillusions-items-components-map-node
        border 1rem solid atariGray(2)

        .name-area
          .name
            max-height 16rem
            line-height 8rem
            color atariGray(3)

        &.current
          .name-area
            .name
              color atariGray(5)

        .direction
          padding 1rem
          color atariGray(2)

        &.up
          .direction
            left calc(50% + 8rem)

        &.down
          .direction
            left calc(50% + 17rem)

        &.in.south
          .direction
            left calc(50% + 5rem)

        &.northwest
        &.southwest
          .direction
            left auto
            right -1rem

        &.northeast
        &.southeast
          .direction
            left 1rem

        &.east::after
        &.west::after
        &.north::after
        &.south::after
        &.back::after
        &.in.no-direction::after
        &.out.no-direction::after
          background atariGray(2)

        &.east::after
        &.west::after
          width 19rem

        &.north::after
        &.south::after
        &.back::after
        &.in.no-direction::after
        &.out.no-direction::after
          height 19rem

        &.northwest::after
        &.west::after
        &.southwest::after
          right -20rem

        &.northeast::after
        &.east::after
        &.southeast::after
          left -20rem

        &.southwest::after
        &.south::after
        &.southeast::after
        &.down::after
        &.back::after
        &.out.no-direction::after
          top -20rem

        &.northwest::after
        &.north::after
        &.northeast::after
        &.up::after
        &.in.no-direction::after
          bottom -20rem

        &.northeast::after
        &.northwest::after
        &.southeast::after
        &.southwest::after
        &.up::after
        &.down::after
          width 19rem
          height 19rem
          background-size 100%

        &.northwest::after
        &.southeast::after
          background-image image('/items/map/bigmap/diagonal-down.png')

        &.northeast::after
        &.southwest::after
          background-image image('/items/map/bigmap/diagonal-up.png')

        &.up::after
        &.down::after
          left calc(50% - 3.5rem)
          background-image image('/items/map/bigmap/stairs-down.png')

        &.in::before
        &.out::before
          content ''
          position absolute
          left calc(50% - 3.5rem)
          width 7rem
          height 6rem
          background-size 100%
          background-image image('/items/map/bigmap/door-in-n.png')
          background-color transparent

        &.in::before
          bottom -2rem

        &.out::before
          top -25rem

        &.in.south::before
        &.out.north::before
          background-image image('/items/map/bigmap/door-in-s.png')
          height 7rem

        &.in.south::before
          top -6rem
          bottom auto

        &.out.north::before
          top auto
          bottom -22rem

        &.in.east::before
        &.in.west::before
        &.out.east::before
        &.out.west::before
          top calc(50% - 6.5rem)
          width 5rem
          height 10rem
          background-size 100%

        &.in.west::before
          left auto
          right -3rem

        &.out.west::before
          left auto
          right -23rem

        &.in.east::before
          left -3rem

        &.out.east::before
          left -23rem

        &.in.east::before
        &.out.west::before
          background-image image('/items/map/bigmap/door-in-e.png')

        &.in.west::before
        &.out.east::before
          background-image image('/items/map/bigmap/door-in-w.png')

        &.northwest.up::after
        &.southwest.down::after
          left auto
          right -20rem

        &.southwest.down::after
        &.northeast.up::after
          background-image image('/items/map/bigmap/stairs-up.png')

        &.northeast.up::after
        &.southeast.down::after
          left -20rem

        &.in.northwest::before
        &.out.northwest::before
        &.in.southeast::before
        &.out.southeast::before
        &.in.northeast::before
        &.out.northeast::before
        &.in.southwest::before
        &.out.southwest::before
          width 5rem
          height 10rem

        &.in.northwest::before
        &.out.northwest::before
        &.in.southeast::before
        &.out.southeast::before
          background-image image('/items/map/bigmap/door-in-nw.png')

        &.in.northeast::before
        &.out.northeast::before
        &.in.southwest::before
        &.out.southwest::before
          background-image image('/items/map/bigmap/door-in-ne.png')

        &.out.southeast::before
          left -23rem
          top -28rem

        &.in.northwest::before
          left auto
          right -3rem
          bottom -3rem
